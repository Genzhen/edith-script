import"core-js/modules/es.array.concat";import"core-js/modules/es.date.to-string";import"core-js/modules/es.function.bind";import"core-js/modules/es.function.name";import"core-js/modules/es.object.to-string";import"core-js/modules/es.regexp.to-string";import{_ as e,g as t,a as o,e as i,b as r,c as a,d as s,f as m,h as n,i as d,j as l,k as c}from"./index-09f2d666.js";import"core-js/modules/es.array.filter";import"core-js/modules/es.array.for-each";import"core-js/modules/es.array.map";import"core-js/modules/es.promise";import"core-js/modules/es.regexp.exec";import"core-js/modules/es.string.match";import"core-js/modules/es.string.link";import"core-js/modules/web.dom-collections.for-each";import"core-js/modules/es.array.find";import"core-js/modules/es.array.index-of";import"core-js/modules/es.array.iterator";import"core-js/modules/es.array.reduce";import"core-js/modules/es.array.slice";import"core-js/modules/es.object.get-prototype-of";import"core-js/modules/es.object.keys";import"core-js/modules/es.regexp.constructor";import"core-js/modules/es.string.iterator";import"core-js/modules/es.string.replace";import"core-js/modules/es.string.split";import"core-js/modules/web.dom-collections.iterator";import"core-js/modules/es.symbol";import"core-js/modules/es.symbol.description";import"core-js/modules/es.array.find-index";import"core-js/modules/es.array.splice";var p=[],u=[];u.add=function(o){var i=u.findIndex((function(e){return o.eid&&e.eid===o.eid}));if(i>=0)return u.splice(i,1,e(e({},u[i]),o));u.length>=20&&u.shift(),u.push(e({eid:t()},o))};var f=function(e){return function(t){var o={type:"navigation",time:m(),method:e||t.detail.method,timeStamp:t.timeStamp,detail:{from:{url:t.oldURL||t.detail.oldURL,title:document.title},to:{url:t.newURL||t.detail.newURL}}};u.add(o)}},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"XMLHttpRequest",o=e.method,i=e.status,r=e.statusText,a=e.responseURL,s=e.originUrl,n=e.body,d=void 0===n?null:n,l=e.startTime,c=e.endTime,f=e._eid,h=e.timeStamp,j=c-l;if(!(p.indexOf(s&&s.split("?")[0])>=0)){var S={eid:f,type:t,time:m(),timeStamp:h,page:{url:location.href,title:document.title},elapsedTime:j,detail:{method:o,status:i,body:d,statusText:r,responseURL:a,originUrl:s}};u.add(S)}},j=function(e){return function(t){var o=t.ws,i=t.timeStamp,r={eid:o._eid,type:"webSocket",time:m(),timeStamp:i,method:e||t.detail.method,elapsedTime:o.elapsedTime,detail:{url:o.url,readyState:o.readyState}};u.add(r)}},S=function(){var o;if(r("click",(o="click",function(e){var t=e.target,i=a(t).toLowerCase(),r=t.className,d=t.id,l=s(t),c={type:o,time:m(),timeStamp:e.timeStamp,page:{url:location.href,title:document.title},detail:{className:r,id:d,outerHTML:l,tagName:i,xPath:n(t)}};u.add(c)}),!0),r("ajaxOpen",(function(e){var o=e.detail;o._eid=t(),o.timeStamp=e.timeStamp,h(o)})),r("ajaxProgress",(function(e){var t=e.detail;t.endTime=m(),h(t)})),r("ajaxLoadEnd",(function(e){var t=e.detail;t.endTime=m(),h(t)})),r("fetchStart",(function(t){var o=t.detail.options,i=e(e({},o),{},{timeStamp:t.timeStamp});h(i,"fetchRequest")})),r("fetchEnd",(function(t){var o=t.detail,i=o.options,r=o.url,a=e(e({},i),{},{responseURL:r,endTime:m(),timeStamp:0},t.detail);h(a,"fetchRequest")})),r("webSocketStart",(function(e){var o=e.detail.target;o.startTime=m(),o.elapsedTime=0,o._eid=t();var i=e.timeStamp;j("open")({ws:o,timeStamp:i})})),r("webSocketOpen",(function(e){var t=e.detail.target;t.openTime=m(),t.elapsedTime=t.openTime-t.startTime;var o=e.timeStamp;j("open")({ws:t,timeStamp:o})})),r("webSocketClose",(function(e){var o=e.detail.target;o._eid=t(),o.endTime=m();var i=e.timeStamp;o.elapsedTime=o.endTime-(o.openTime||o.startTime),j("close")({ws:o,timeStamp:i})})),d){var i=location.href;setInterval((function(){i!=location.href&&(f("intervalCheck")({oldURL:i,newURL:location.href,timeStamp:l()}),i=location.href)}),250)}else r("hashchange",f("hashchange")),r("navigationChange",f())},g=function(){function e(){c(this,e),this.name="breadcrumbs",this.state={}}return o(e,[{key:"apply",value:function(e){var t=this;e(this.name,(function(e,o){var r=e.state,a=e.ajaxWhiteList;r[t.name]||(p=a,function(){function e(e,t){return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return r[2]&&t&&i.call({oldURL:location.href,newURL:r[2],method:e},"navigationChange"),t.apply(this,r)}}!history.replaceState&&history.pushState||(history.pushState=e("pushState",history.pushState),history.replaceState=e("replaceState",history.replaceState))}(),S()),o(u)}))}}]),e}();window.Edith||(window.Edith={}),window.Edith.BreadcrumbsPlugin=g;export default g;
