import"core-js/modules/es.array.concat";import"core-js/modules/es.function.bind";import"core-js/modules/es.function.name";import{_ as e,g as t,a as o,e as r,b as s,c as i,d as a,f as n,h as m,i as d,j as l,k as c}from"./index-9bbb6d1a.js";import"core-js/modules/es.array.filter";import"core-js/modules/es.array.for-each";import"core-js/modules/es.array.map";import"core-js/modules/es.object.to-string";import"core-js/modules/es.promise";import"core-js/modules/es.regexp.exec";import"core-js/modules/es.string.match";import"core-js/modules/es.string.link";import"core-js/modules/web.dom-collections.for-each";import"core-js/modules/es.array.find";import"core-js/modules/es.array.index-of";import"core-js/modules/es.array.iterator";import"core-js/modules/es.array.reduce";import"core-js/modules/es.array.slice";import"core-js/modules/es.date.to-string";import"core-js/modules/es.object.get-prototype-of";import"core-js/modules/es.object.keys";import"core-js/modules/es.string.iterator";import"core-js/modules/es.string.replace";import"core-js/modules/es.string.split";import"core-js/modules/web.dom-collections.iterator";import"core-js/modules/es.object.values";import"core-js/modules/es.symbol";import"core-js/modules/es.symbol.description";import"core-js/modules/es.array.find-index";import"core-js/modules/es.array.splice";var u=[],p=[];p.add=function(o){var r=p.findIndex((function(e){return o.eid&&e.eid===o.eid}));if(r>=0)return p.splice(r,1,e(e({},p[r]),o));p.length>=20&&p.shift(),p.push(e({eid:t()},o))};var h=function(e){return function(t){var o={type:"navigation",time:n(),method:e||t.detail.method,timeStamp:t.timeStamp,detail:{from:{url:t.oldURL||t.detail.oldURL,title:document.title},to:{url:t.newURL||t.detail.newURL}}};p.add(o)}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"XMLHttpRequest",o=e.method,r=e.status,s=e.statusText,i=e.responseURL,a=e.originUrl,m=e.body,d=void 0===m?null:m,l=e.requestHeader,c=e.startTime,h=e.endTime,f=e._eid,j=e.timeStamp,y=h-c;if(!(u.indexOf(a&&a.split("?")[0])>=0)){var g={eid:f,type:t,time:n(),timeStamp:j,page:{url:location.href,title:document.title},elapsedTime:y,detail:{method:o,status:r,body:d,requestHeader:l,responseHeader:e.getAllResponseHeaders()||{},statusText:s,responseURL:i,originUrl:a}};j||delete g.timeStamp,p.add(g)}},j=function(){var o;if(s("click",(o="click",function(e){var t=e.target,r=i(t).toLowerCase(),s=t.className,d=t.id,l=a(t),c={type:o,time:n(),timeStamp:e.timeStamp,page:{url:location.href,title:document.title},detail:{className:s,id:d,outerHTML:l,tagName:r,xPath:m(t)}};p.add(c)}),!0),s("ajaxOpen",(function(e){var o=e.detail;o._eid=t(),o.timeStamp=e.timeStamp,f(o)})),s("ajaxProgress",(function(e){var t=e.detail;t.endTime=n(),t.timeStamp=0,f(t)})),s("ajaxLoadEnd",(function(e){var t=e.detail;t.endTime=n(),t.timeStamp=0,f(t)})),s("fetchStart",(function(t){var o=t.detail.options,r=e(e({},o),{},{timeStamp:t.timeStamp,requestHeader:o.headers});f(r,"fetchRequest")})),s("fetchEnd",(function(t){var o=t.detail,r=o.options,s=o.url,i=e(e({},r),{},{responseURL:s,requestHeader:r.headers,endTime:n(),timeStamp:0},t.detail);f(i,"fetchRequest")})),d){var r=location.href;setInterval((function(){r!=location.href&&(h("intervalCheck")({oldURL:r,newURL:location.href,timeStamp:l()}),r=location.href)}),250)}else s("hashchange",h("hashchange")),s("navigationChange",h())},y=function(){function e(){c(this,e),this.name="breadcrumbs",this.state={}}return o(e,[{key:"apply",value:function(e){var t=this;e(this.name,(function(e,o){var s=e.state,i=e.ajaxWhiteList;s[t.name]||(u=i,function(){function e(e,t){return function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return s[2]&&t&&r.call({oldURL:location.href,newURL:s[2],method:e},"navigationChange"),t.apply(this,s)}}!history.replaceState&&history.pushState||(history.pushState=e("pushState",history.pushState),history.replaceState=e("replaceState",history.replaceState))}(),j()),o(p)}))}}]),e}();window.Edith||(window.Edith={}),window.Edith.BreadcrumbsPlugin=y;export default y;
