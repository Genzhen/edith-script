var edithDebug=function(e){"use strict";function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var n=t((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),r=t((function(e){var t=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=t)})),o=function(e){return"object"==typeof e?null!==e:"function"==typeof e},i=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e},a=function(e){try{return!!e()}catch(e){return!0}},u=!a((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),c=n.document,s=o(c)&&o(c.createElement),f=!u&&!a((function(){return 7!=Object.defineProperty((e="div",s?c.createElement(e):{}),"a",{get:function(){return 7}}).a;var e})),l=Object.defineProperty,d={f:u?Object.defineProperty:function(e,t,n){if(i(e),t=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(t,!0),i(n),f)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},p=u?function(e,t,n){return d.f(e,t,function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}(1,n))}:function(e,t,n){return e[t]=n,e},h={}.hasOwnProperty,m=function(e,t){return h.call(e,t)},y=0,v=Math.random(),g=t((function(e){var t=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:r.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}))("native-function-to-string",Function.toString),b=t((function(e){var t,o="Symbol(".concat(void 0===(t="src")?"":t,")_",(++y+v).toString(36)),i=(""+g).split("toString");r.inspectSource=function(e){return g.call(e)},(e.exports=function(e,t,r,a){var u="function"==typeof r;u&&(m(r,"name")||p(r,"name",t)),e[t]!==r&&(u&&(m(r,o)||p(r,o,e[t]?""+e[t]:i.join(String(t)))),e===n?e[t]=r:a?e[t]?e[t]=r:p(e,t,r):(delete e[t],p(e,t,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||g.call(this)}))})),w=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},S=function(e,t,o){var i,a,u,c,s=e&S.F,f=e&S.G,l=e&S.S,d=e&S.P,h=e&S.B,m=f?n:l?n[t]||(n[t]={}):(n[t]||{}).prototype,y=f?r:r[t]||(r[t]={}),v=y.prototype||(y.prototype={});for(i in f&&(o=t),o)u=((a=!s&&m&&void 0!==m[i])?m:o)[i],c=h&&a?w(u,n):d&&"function"==typeof u?w(Function.call,u):u,m&&b(m,i,u,e&S.U),y[i]!=u&&p(y,i,c),d&&v[i]!=u&&(v[i]=u)};n.core=r,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128;var T=S,j=n.navigator,E=j&&j.userAgent||"",O=[].slice,x=/MSIE .\./.test(E),R=function(e){return function(t,n){var r=arguments.length>2,o=!!r&&O.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}T(T.G+T.B+T.F*x,{setTimeout:R(n.setTimeout),setInterval:R(n.setInterval)});var U="//testevent-edith.op-center.cn",k=["".concat(U,"/v1/monitor/add"),"".concat(U,"/v1/upload/test-img")],I=null,C="/",D=function(e,t){return new Promise((function(n,r){e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var t={};try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}n(t)}else if(e.status>399){if(k.indexOf(e.originUrl.split("?")[0])>=0)return n(e.response);r(e.response)}},t()}))},F=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return I=new XMLHttpRequest,D(I,(function(){I.open("GET","".concat(C).concat(e,"?").concat(Q(t)),!0),I.send()}))}},B=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return I=new XMLHttpRequest,D(I,(function(){I.open("POST","".concat(C).concat(e),!0),I.setRequestHeader("Content-type","application/json;charset=utf-8"),I.send(JSON.stringify(t))}))}};(function(e){C=e})(U);var G,X,J,K,W,z=B("/v1/monitor/add"),$=F("/v1/upload/test-img"),Q=(F("/v1/log/add"),B("/v1/log/add"),function(e,t){var n,r,o="";for(n in e)r=e[n],o+=n+"="+("function"==typeof t?t(r,n):r&&"object"===L(r)&&!Object.getPrototypeOf(r).slice?JSON.stringify(r):r)+"&";return o.slice(0,-1)}),V=function(e){return e?e===document?"html":e.tagName?e.tagName:e.outerHTML.match(/<([^>\s]+)/)[1]:""},Y=(navigator.userAgent.match(/[^(\s]+(\s\([^)]+\))?/g),function(e){if(e){["preventDefault","stopPropagation"].forEach((function(t){return e[t]&&e[t]()})),e.cancelBubble=!0}}),Z=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(e){console.warn("edith 内部报错",e)}}},ee=function(e,t,n){addEventListener?addEventListener(e,Z(t),n):attachEvent&&attachEvent("on".concat(e),Z(t))},te=function(){return(""+ie()*Math.random()).slice(0,8)},ne=function e(t){var n=t.parentNode;if(n===document)return"/html";var r=V(t).toLowerCase();if(t===document.body)return"/html/".concat(r);for(var o=0,i=n.childNodes,a=0;a<i.length;a++){var u=i[a];if(u===t)return"".concat(e(n),"/").concat(r,"[").concat(o+1,"]");1===u.nodeType&&u.tagName===r&&o++}},re=((G=navigator.userAgent.toLowerCase()).indexOf("msie")>-1?G.match(/msie ([\d.]+)/)[1]:100)<=8,oe=function(e){var t=e.outerHTML;return t.length>200&&(t=t.substr(0,100)+"... ..."+t.substr(-99)),t},ie=function(){return(new Date).getTime()},ae=function(e){return e>=200&&e<300};function ue(e){window.dispatchEvent(new CustomEvent(e,{detail:this}))}X={abort:"ajaxAbort",error:"ajaxError",progress:"ajaxProgress",timeout:"ajaxTimeout",loadend:"ajaxLoadEnd"},J=XMLHttpRequest,K=["error","timeout","abort"],XMLHttpRequest=function(){var e=new J,t=!1;Object.keys(X).forEach((function(n){e.addEventListener(n,(function(e){ue.call(this,X[n]),"loadend"===n&&(ae(this.status)||t||ue.call(this,X.error)),t||(t=K.indexOf(n)>=0)}),!1)}));var n=e.send;e.send=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n.apply(e,r),e.body=r[0],ue.call(e,"ajaxSend")};var r=e.open;e.open=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];r.apply(e,n),e.method=n[0],e.originUrl=n[1],e.async=n[2],e.startTime=ie(),e.endTime=ie(),ue.call(e,"ajaxOpen")};var o=e.setRequestHeader;return e.requestHeader={},e.setRequestHeader=function(t,n){e.requestHeader[t]=n,o.call(e,t,n)},e},(W=fetch)&&(fetch=function(){for(var e=ie(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=P({url:n[0],method:"GET",body:null,headers:{},status:0,statusText:"",startTime:e,endTime:e,timeStamp:e,originUrl:n[0],_eid:te(),getAllResponseHeaders:function(){return{}}},n[1]);return ue.call({options:o},"fetchStart"),W.apply(this,n).then((function(e){return e.options=o,ae(e.status)||ue.call({options:o},"fetchError"),ue.call({options:o},"fetchEnd"),e}),(function(e){e.options=o,ue.call({options:o},"fetchError")}))}),function(){function e(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r[2]&&t&&ue.call({oldURL:location.href,newURL:r[2],method:e},"navigationChange"),t.apply(this,r)}}!history.replaceState&&history.pushState||(history.pushState=e("pushState",history.pushState),history.replaceState=e("replaceState",history.replaceState))}();var ce={assign:function(e){Object.keys(e||{}).forEach((function(t){"assign"!==t&&(ce[t]=e[t])}))},needCheckSpeeds:!0,apiKey:"",silentDev:!1},se=[];se.add=function(e){var t=se.findIndex((function(t){return e.eid&&t.eid===e.eid}));if(t>=0)return se.splice(t,1,P(P({},se[t]),e));se.length>=20&&se.shift(),se.push(P({eid:te()},e))};var fe=[],le=[];Array.prototype.getAarege=function(){for(var e=0,t=0;t<this.length;t++)e+=this[t];return 0===this.length?-1:e/this.length};var de=function(){var e,t,n=function(){var e=navigator,t="connection",n="downlink";if(e[t]&&e[t][n])return 1024*e[t][n]/8}();if(n)return fe.push(n);ce.needCheckSpeeds&&(e=function(e){return fe.push(e)},t=3,function n(r){var o=Date.now();$({t:Math.random()}).then((function(i){var a=i.length/((Date.now()-o)/1e3)/1024;e&&r&&e(Math.floor(a)),r>=t||n(++r)})).catch((function(e){}))}(0))},pe=function(){!function(e,t){t=t||1;var n=0,r=new Image;r.onerror=Z(Y),r.onload=function r(){var o=ie(),i=new Image;i.onload=function(){var i=ie()-o;n++,e(i),n<t&&setTimeout(r,1e3)},i.src="//hm.baidu.com/hm.gif?"+Math.random(),i.onerror=Z(Y)},r.src="//hm.baidu.com/hm.gif?"+Math.random()}((function(e){return le.push(e)}),5)},he=function(e){var t,n,r,o;if(ce.apiKey)return{severity:e.severity,apiKey:ce.apiKey,breadcrumbs:se,columnNumber:e.colno,lineNumber:e.lineno,type:e._type||e.type,locale:navigator.browserLanguage||navigator.language,name:(e.name||e.message&&e.message.split(":")[0]||e.type).replace(/^Uncaught\s/,""),message:e.message||e.description||"",extraInfo:e.extraInfo||null,stacktrace:e.error&&e.error.stack,performance:(o=performance,{timing:o.timing,entriesTiming:{navigation:o.getEntriesByType("navigation"),paint:o.getEntriesByType("paint"),resource:o.getEntriesByType("resource").filter((function(e){return!e.name.match(/hm\.baidu\.com\/hm\.gif/)}))}}),redo:window.getRedo&&window.getRedo()||null,target:e._target,time:+new Date,timeStamp:e.timeStamp,title:document.title,referrer:document.referrer,url:location.href,userAgent:navigator.userAgent,env:{netWorkType:(t=navigator,n="connection",r="effectiveType",t[n]&&t[n][r]?t[n][r]:""),speed:fe.getAarege(),delays:le.getAarege()}}},me=function(e){return function(t){var n={type:"navigation",time:ie(),method:e||t.detail.method,timeStamp:t.timeStamp,detail:{from:{url:t.oldURL||t.detail.oldURL,title:document.title},to:{url:t.newURL||t.detail.newURL}}};se.add(n)}},ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"XMLHttpRequest",n=e.method,r=e.status,o=e.statusText,i=e.responseURL,a=e.originUrl,u=e.body,c=void 0===u?null:u,s=e.requestHeader,f=e.startTime,l=e.endTime,d=e._eid,p=e.timeStamp,h=l-f;if(!(k.indexOf(a&&a.split("?")[0])>=0)){var m={eid:d,type:t,time:ie(),timeStamp:p,page:{url:location.href,title:document.title},elapsedTime:h,detail:{method:n,status:r,body:c,requestHeader:s,responseHeader:e.getAllResponseHeaders()||{},statusText:o,responseURL:i,originUrl:a}};p||delete m.timeStamp,se.add(m)}},ve=function(){if(!window.behaviorListenerStatus){var e;if(ee("click",(e="click",function(t){var n=t.target,r=V(n).toLowerCase(),o=n.className,i=n.id,a=oe(n),u={type:e,time:ie(),timeStamp:t.timeStamp,page:{url:location.href,title:document.title},detail:{className:o,id:i,outerHTML:a,tagName:r,xPath:ne(n)}};se.add(u)}),!0),ee("ajaxOpen",(function(e){var t=e.detail;t._eid=te(),ye(t)})),ee("ajaxProgress",(function(e){var t=e.detail;t.endTime=ie(),ye(t)})),ee("ajaxLoadEnd",(function(e){var t=e.detail;t.endTime=ie(),ye(t)})),ee("fetchStart",(function(e){var t=e.detail.options,n=P(P({},t),{},{timeStamp:e.timeStamp,requestHeader:t.headers});ye(n,"fetchRequest")})),ee("fetchEnd",(function(e){var t=e.detail,n=t.options,r=t.url,o=P(P({},n),{},{responseURL:r,requestHeader:n.headers,endTime:ie()},e.detail);ye(o,"fetchRequest")})),re){var t=location.href,n=performance.timing.navigationStart||ie();setInterval((function(){t!=location.href&&(me("intervalCheck")({oldURL:t,newURL:location.href,timeStamp:new Date-n}),t=location.href)}),250)}else ee("hashchange",me("hashchange")),ee("navigationChange",me());window.behaviorListenerStatus=!0}},ge=function(e){var t=setTimeout(Z((function(){var t,n=e.reason;e.message=(t=n)&&"object"===L(t)?JSON.stringify(t):t+"",e.name="unhandledrejection",e._type="error",be(e)})),500);ee("rejectionhandled",Z((function(n){n.promise===e.promise&&(t&&clearTimeout(t),t=null)})))};function be(e){var t=e.target;if(t!==window){var n=V(t).toLowerCase(),r="";r="link"===n?t.href:t.src,e.message=r,e.name=e._type="resourceError",e._target={tagName:n,className:t.className,id:t.id,outerHTML:oe(t),xPath:ne(t)}}if("ajaxError"===e.type){e._type="httpError",e.name="ajaxError",e.severity="warning";var o=e.detail,i=o.method,a=o.body,u=o.originUrl,c=o.startTime,s=o.endTime,f=o.responseText,l=o.statusText,d=o.status,p=o.requestHeader;if(k.indexOf(u&&u.split("?")[0])>=0)return;e.extraInfo={elapsedTime:s-c,requestHeader:p,responseHeader:o.getAllResponseHeaders()||{},responseText:f,status:d,statusText:l,method:i,body:a,url:u}}if("fetchError"===e.type){var h=e.detail.options;e._type="httpError",e.name=e.message="fetchError",e.error=e.detail,e.extraInfo=P({elapsedTime:h.endTime-h.startTime},h)}if("webSocketError"===e.type){var m=e.detail.target;e.extraInfo={url:m.url,readyState:m.readyState,elapsedTime:m.elapsedTime}}var y=he(e);z(y)}var we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=he({type:"customError",name:e,message:t=""+t});z(n).then((function(){}))};function Se(){var e=[[]];window.edithRecord({emit:function(t,n){n&&e.push([]),e[e.length-1].push(t)},checkoutEveryNth:200,checkoutEveryNms:12e4}),window.getRedo=function(){var t=H(e.slice(-2),2),n=t[0],r=t[1],o=void 0===r?[]:r;return[].concat(M(n),M(o))}}if(window.edithRecord)Z(Se());else{var Te=function(e,t){var n=new CustomEvent(e,{detail:t});dispatchEvent(n)};Object.defineProperty(window,"edithRecord",{get:function(){return window._edithRecord},set:function(e){window._edithRecord?console.warn("edithRecord不能赋值"):(Object.getPrototypeOf(window)._edithRecord=e,Te.call(this,"addEdithRecord",e))}}),ee("addEdithRecord",(function(){Se()}))}var je={errorReport:be,debugNotice:we,errorListenerStatus:!1,init:function(e){if(e=e||{},ce.assign(P(P({},ce.value),e)),!je.errorListenerStatus&&(ve(),!ce.silentDev||!location.host.match(/^localhost|^\d+\.\d+/))){ee("error",be,!0),ee("unhandledrejection",ge),ee("ajaxError",be),ee("ajaxTimeout",be),ee("fetchError",be),je.errorListenerStatus=!0;var t=requestIdleCallback;if(!t)return setTimeout(pe,6e3*Math.random()+500),setTimeout(de,7e3*Math.random()+500);var n=[pe,de];t((function e(r){for(;(r.timeRemaining()>0||r.didTimeout)&&n.length>0;)n.shift()();n.length>0&&t(e)}),{timeout:2e3})}}};window.Edith=je,Object.defineProperty(window,"Edith",{configurable:!1,writable:!1});var Ee=we;return e.debugNotice=Ee,e.default=je,e}({});
